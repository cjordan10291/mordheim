<!doctype html>
<html>
<head>

<title>How to Parse a JSON file using jQuery</title>

<style>
body {
	text-align: center;
	font-family: arial;
}

.button {
	margin: 20px;
	font-size: 16px;
	font-weight: bold;
	padding: 5px 10px;
}
</style>


</head>
<body onload="loadUnitTypeSelectOptions()">
	<script
		src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script type="text/javascript" src="data/data.json.inline"></script>
	<script type="text/javascript" src="scripts/buttons.js"></script>
	<!--    
    <a href="file:///morddata.json" target="_blank">Open JSON file</a><br />
    <input type="button" value="Get and parse JSON" class="button" />
-->
	<table>
		<tr>
			<td colspan='9'>Build Name:<input id="build_name" /></td>
		</tr>
		<tr>
			<td colspan='9'>Unit Type:<select id="unit_type" onchange="unitTypeChanged(this)"></select></td>
		</tr>
		<tr>
			<td colspan='3'><label id="physical_groupvalidation">&nbsp;</label></td>
			<td colspan='3'><label id="mental_groupvalidation">&nbsp;</label></td>
			<td colspan='3'><label id="martial_groupvalidation">&nbsp;</label></td>
		</tr>
		<tr><td colspan='3'>Physical Points:<span id="physical_points">0</span> left of <span id="max_physical_points">0</span></td>
			<td colspan='3'>Mental Points:<span id="mental_points">0</span> left of <span id="max_mental_points">0</span></td>
			<td colspan='3'>Martial Points:<span id="martial_points">0</span>  of <span id="max_martial_points">0</span></td>
		</tr>
		<tr class="stat_headers">
			<td>Strength</td>
			<td>Toughness</td>
			<td>Agility</td>
			<td>Leadership</td>
			<td>Intelligence</td>
			<td>Alertness</td>
			<td>Weapon Skill</td>
			<td>Ballistic Skill</td>
			<td>Accuracy</td>
		</tr>
		<tr class="mins">
			<td><label id="strength_min"></label></td>
			<td><label id="toughness_min"></label></td>
			<td><label id="agility_min"></label></td>
			<td><label id="leadership_min"></label></td>
			<td><label id="intelligence_min"></label></td>
			<td><label id="alertness_min"></label></td>
			<td><label id="weapon_skill_min"></label></td>
			<td><label id="ballistic_skill_min"></label></td>
			<td><label id="accuracy_min"></label></td>
		</tr>
		<tr class="stats">
			<td id="strength"><input id="strength_minus" type="button" value='-' onclick="mySubtractOnclick(this)"/>
				<input id="strength_value" class="physical" type="text" size="2" maxlength="2" /> <input id="strength_plus" type="button"
				value='+'  onclick="myAddOnclick(this)" /></td>
			<td id="toughness"><input id="toughness_minus" type="button" value='-' onclick="mySubtractOnclick(this)"/>
				<input id="toughness_value" class="physical" type="text" size="2" maxlength="2" /> <input id="toughness_plus" type="button"
				value='+'  onclick="myAddOnclick(this)" /></td>
			<td id="agility"><input id="agility_minus" type="button" value='-' onclick="mySubtractOnclick(this)"/>
				<input id="agility_value" class="physical" type="text" size="2" maxlength="2" /> <input id="agility_plus" type="button"
				value='+'  onclick="myAddOnclick(this)" /></td>
			<td id="leadership"><input id="leadership_minus" type="button" value='-' onclick="mySubtractOnclick(this)"/>
				<input id="leadership_value" class="mental" type="text" size="2" maxlength="2" /> <input id="leadership_plus" type="button"
				value='+'  onclick="myAddOnclick(this)" /></td>
			<td id="intelligence"><input id="intelligence_minus" type="button" value='-' onclick="mySubtractOnclick(this)"/>
				<input id="intelligence_value" class="mental" type="text" size="2" maxlength="2" /> <input id="intelligence_plus" type="button"
				value='+'  onclick="myAddOnclick(this)" /></td>
			<td id="alertness"><input id="alertness_minus" type="button" value='-' onclick="mySubtractOnclick(this)"/>
				<input id="alertness_value" class="mental" type="text" size="2" maxlength="2" /> <input id="alertness_plus" type="button"
				value='+'  onclick="myAddOnclick(this)" /></td>
			<td id="weapon_skill"><input id="weapon_skill_minus" type="button" value='-' onclick="mySubtractOnclick(this)"/>
				<input id="weapon_skill_value" class="martial" type="text" size="2" maxlength="2" /> <input id="weapon_skill_plus" type="button"
				value='+'  onclick="myAddOnclick(this)" /></td>
			<td id="ballistic_skill"><input id="ballistic_skill_minus" type="button" value='-' onclick="mySubtractOnclick(this)"/>
				<input id="ballistic_skill_value" class="martial" type="text" size="2" maxlength="2" /> <input id="ballistic_skill_plus" type="button"
				value='+'  onclick="myAddOnclick(this)" /></td>
			<td id="accuracy"><input id="accuracy_minus" type="button" value='-' onclick="mySubtractOnclick(this)"/>
				<input id="accuracy_value" class="martial" type="text" size="2" maxlength="2" /> <input id="accuracy_plus" type="button"
				value='+'  onclick="myAddOnclick(this)" /></td>
		</tr>
		<tr class="maxes">
			<td><label id="strength_max"></label></td>
			<td><label id="toughness_max"></label></td>
			<td><label id="agility_max"></label></td>
			<td><label id="leadership_max"></label></td>
			<td><label id="intelligence_max"></label></td>
			<td><label id="alertness_max"></label></td>
			<td><label id="weapon_skill_max"></label></td>
			<td><label id="ballistic_skill_max"></label></td>
			<td><label id="accuracy_max"></label></td>
		</tr>
		<tr class="validations">
			<td><label id="strength_attributevalidation">&nbsp;</label></td>
			<td><label id="toughness_attributevalidation">&nbsp;</label></td>
			<td><label id="agility_attributevalidation">&nbsp;</label></td>
			<td><label id="leadership_attributevalidation">&nbsp;</label></td>
			<td><label id="intelligence_attributevalidation">&nbsp;</label></td>
			<td><label id="alertness_attributevalidation">&nbsp;</label></td>
			<td><label id="weapon_skill_attributevalidation">&nbsp;</label></td>
			<td><label id="ballistic_skill_attributevalidation">&nbsp;</label></td>
			<td><label id="accuracy_attributevalidation">&nbsp;</label></td>
		</tr>
	</table>
	<h2>Skills:   <span id="remaining_skill_points">0</span> remaining of <span id="total_skill_points">0</span></h2>
	<h3 style="text-align: left;">Active Skills: <span id="active_slots_left">0</span> slots left</h3>
	<table id="active_skills">
		<thead>
			<tr>
				<th>Action</th>
				<th>Skill</th>
				<th>Attribute</th>
				<th>Requirement</th>
				<th>Point Cost</th>
				<th>Offense</th>
				<th>Strategy</th>
				<th>Description</th>
			</tr>
		</thead>
		<tfoot>
		<!--  onchange='addNewActiveSkill(this.options[this.selectedIndex].value)'-->
			<tr><td><select id="new_activeskillselector" onchange='addNewActiveSkill(this.options[this.selectedIndex].value)'></select></td></tr>
		</tfoot>
		<tbody>
		</tbody>	
	</table>
	<h3 style="text-align: left;">Passive Skills: <span id="passive_slots_left">0</span> slots left</h3>
	<table id="passive_skills">
		<thead>
			<tr>
				<th>&nbsp;</th>
				<th>Action</th>
				<th>Skill</th>
				<th>Attribute</th>
				<th>Requirement</th>
				<th>Point Cost</th>
				<th>Description</th>
			</tr>
		</thead>
		<tfoot>
			<tr><td><select id="new_passiveskillselector"></select></td></tr>
		</tfoot>
		<tbody>
		</tbody>	
	</table>

	<br />
	<h1>Units Info</h1>
	<div id="results"></div>
	<hr />
	<h1>Skills</h1>
	<h2>Active</h2>
	<div id="activeskills"></div>
	<h2>Passive</h2>
	<div id="passiveskills"></div>


	<script>
		//        //When DOM loaded we attach click event to button
		//        $(document).ready(function() {
		//            //after button is clicked we download the data
		//            $('.button').click(function(){
		//                //start ajax request
		//                $.ajax({
		//                    url: "file:///d:/tmp/morddata.json",
		//                    //force to handle it as text
		//                    dataType: "text",
		//					crossdomain: true,
		//                    success: function(data) {
		//                        //data downloaded so we call parseJSON function 
		//                        //and pass downloaded data
		//                        var json = $.parseJSON(data);
		//                        //now json variable contains data in json format
		//                        //let's display a few items
		//                        //$('#results').html('Plugin name: ' + json.name + '<br />Author: ' + json.author.name);
		//						$.each(json, function(idx, obj) {
		//						   $('#results').html(json);
		//						});
		//                    }
		//                });
		//            });
		//        });
		//var json = $.parseJSON(jsonData);
		//                        //$('#results').html('Plugin name: ' + json.name + '<br />Author: ' + json.author.name);

		$('#results').append("<br/>" + "Unit" //idx 
				+ ",Type" // + obj.type 
				+ ",Strength"// + obj.attributes.strength.min
				+ ",Toughness"// + obj.attributes.toughness.min
				+ ",Agility"// + obj.attributes.agility.min
				+ ",Leadership"// + obj.attributes.leadership.min
				+ ",Intelligence"// + obj.attributes.intelligence.min
				+ ",Alertness"// + obj.attributes.alertness.min
				+ ",Weapon Skill"// + obj.attributes.weapon_skill.min
				+ ",Ballistic Skill"// + obj.attributes.ballistic_skill.min
				+ ",Accuracy" //+ obj.attributes.accuracy.min

				+ ",Physical" //+ obj.attributepoints.physical
				+ ",Mental" //+ obj.attributepoints.mental
				+ ",Martial" //+ obj.attributepoints.martial
				+ ",Skill Points" //+ obj.skillpoints
				+ ",Spell Points" //+ obj.spellpoints

				+ ",Max Strength"// + obj.attributes.strength.max
				+ ",Max Toughness"// + obj.attributes.toughness.max
				+ ",Max Agility"// + obj.attributes.agility.max
				+ ",Max Leadership"// + obj.attributes.leadership.max
				+ ",Max Intelligence"// + obj.attributes.intelligence.max
				+ ",Max Alertness"// + obj.attributes.alertness.max
				+ ",Max Weapon Skill"// + obj.attributes.weapon_skill.max
				+ ",Max Ballistic Skill"// + obj.attributes.ballistic_skill.max
				+ ",Max Accuracy"//  + obj.attributes.accuracy.max

		);
		$.each(jsonData.profiles, function(idx, obj) {
			$('#results').append(
					"<br/>" + idx
					//						   + "," + Object.keys(jsonData.profiles)[idx]
					+ "," + obj.type + "," + obj.attributes.strength.min + ","
							+ obj.attributes.toughness.min + ","
							+ obj.attributes.agility.min + ","
							+ obj.attributes.leadership.min + ","
							+ obj.attributes.intelligence.min + ","
							+ obj.attributes.alertness.min + ","
							+ obj.attributes.weapon_skill.min + ","
							+ obj.attributes.ballistic_skill.min + ","
							+ obj.attributes.accuracy.min

							+ "," + obj.attributepoints.physical + ","
							+ obj.attributepoints.mental + ","
							+ obj.attributepoints.martial + ","
							+ obj.skillpoints + "," + obj.spellpoints

							+ "," + obj.attributes.strength.max + ","
							+ obj.attributes.toughness.max + ","
							+ obj.attributes.agility.max + ","
							+ obj.attributes.leadership.max + ","
							+ obj.attributes.intelligence.max + ","
							+ obj.attributes.alertness.max + ","
							+ obj.attributes.weapon_skill.max + ","
							+ obj.attributes.ballistic_skill.max + ","
							+ obj.attributes.accuracy.max);
		});

		//						var countTxt = '{ "data": [   { "val": 1 },\
		//						     { "val": 2 },\
		//						     { "val": 3 }\
		//						]    }';

		//						var count = $.parseJSON(countTxt);
		//						var count = { one: 1, two: 2, three: 3, four: 4 };

		//						$.each(count, function(idx, obj)	{
		//						   //$('#results').html(obj);
		//						   $('#results').append(obj + " ");
		//						});

		//$('#results').html("<h1>Hi</h1>");
		//				$('#activeskills').append("Not working");

		$('#activeskills').append(
				"<br/>key" + ",Skill"// + obj.name
						+ ",Type"// + obj.type
						+ ",Attribute"// + obj.attribute
						+ ",Basic Requirement" + ",Mastery Requirement"
						+ ",Basic Cost" + ",Mastery Cost" + ",Offensive Points"
						+ ",Strategy Points" + ",Basic Description"
						+ ",Mastery Description");

		$
				.each(
						jsonData.skills.active,
						function(idx, obj) {
							$('#activeskills')
									.append(
											"<br/>"
													+ idx
													+ ","
													+ obj.name
													+ ","
													+ obj.type
													+ ","
													+ obj.attribute
													+ ","
													+ (((typeof obj.requirements === "undefined") || (typeof obj.requirements.basic === "undefined")) ? 0
															: obj.requirements.basic)
													+ ","
													+ (((typeof obj.requirements === "undefined") || (typeof obj.requirements.mastery === "undefined")) ? 0
															: obj.requirements.mastery)
													//			+ "," + obj.requirements.mastery
													+ ","
													+ obj.cost.basic
													+ ","
													+ obj.cost.mastery
													//			+ "," + obj.info.cost.offense?obj.info.cost.offense:0
													//			+ "," + obj.info.cost.strategy?obj.info.cost.strategy:0
													+ ","
													+ ((typeof obj.info.cost.offense === "undefined") ? 0
															: obj.info.cost.offense)
													+ ","
													+ ((typeof obj.info.cost.strategy === "undefined") ? 0
															: obj.info.cost.strategy)
													//			+ "," + obj.info.cost.offense
													//			+ "," + obj.info.cost.strategy
													+ ",\""
													+ obj.description.basic
													+ "\"" + ",\""
													+ obj.description.mastery
													+ "\""

									);
							//			$('#activeskills').append("<hr/>");

						});

		$('#passiveskills').append(
				"<br/>key" + ",Skill"// + obj.name
						+ ",Type"// + obj.type
						+ ",Attribute"// + obj.attribute
						+ ",Basic Requirement" + ",Mastery Requirement"
						+ ",Basic Cost" + ",Mastery Cost" + ",Offensive Points"
						+ ",Strategy Points" + ",Basic Description"
						+ ",Mastery Description");

		$
				.each(
						jsonData.skills.passive,
						function(idx, obj) {
							$('#passiveskills')
									.append(
											"<br/>"
													+ idx
													+ ","
													+ obj.name
													+ ","
													+ obj.type
													+ ","
													+ obj.attribute
													+ ","
													+ (((typeof obj.requirements === "undefined") || (typeof obj.requirements.basic === "undefined")) ? 0
															: obj.requirements.basic)
													+ ","
													+ (((typeof obj.requirements === "undefined") || (typeof obj.requirements.mastery === "undefined")) ? 0
															: obj.requirements.mastery)
													+ "," + obj.cost.basic
													+ "," + obj.cost.mastery
													+ "," + 0 // (( typeof obj.info.cost.offense === "undefined" ) ? 0 : obj.info.cost.offense )
													+ "," + 0 //( ( typeof obj.info.cost.strategy === "undefined" ) ? 0 : obj.info.cost.strategy )
													+ ",\""
													+ obj.description.basic
													+ "\"" + ",\""
													+ obj.description.mastery
													+ "\"");
						});
	</script>
</body>
</html>